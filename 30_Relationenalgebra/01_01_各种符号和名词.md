
# 1 理论 

## 1.1 relation 

一个 realtion 1就是一个 table 

## 1.2 tuple

Element 的组合 von eine Relation ( table )

Tupel t1 - Element von R1

t1 ={ name, number, ... , }  这些都是 attribute von table 

## 1.3 **π = Projection**  : select

The projection operator selects specific attributes (columns) from a relation (table).

Returns only the Name column from the Students relation.

```
π_Name(Students)
```

## 1.4 **σ = Selection**  where 


The selection operator filters tuples (rows) from a relation based on a given condition.

```
σ_Age > 20(Students)
```


Returns all tuples from the Students relation where the Age attribute is greater than 20.

## 1.5 ρ = Renaming

The renaming operator allows you to change the name of a relation or its attributes.

Changes the name of the relation from Students to NewStudents.
```
ρ_NewStudents(Students)
```

## 1.6 Χ = Cartesian Product

The Cartesian product combines two relations by pairing every tuple of the first relation with every tuple of the second relation.

Students Χ Courses
```
Combines all tuples from the Students relation with all tuples from the Courses relation.
```


## 1.7 γ: Grouping and Aggregation 

```sql
π[Bezeichnung, Stückzahl] (
  ρ[Stückzahl] (
    γ [(Nr), sum(Anzahl)] (Artikel ⨝ [Artikel.Nr = Lagerbestand.ArtNr] Lagerbestand)
  )
)

```

![](image/Pasted%20image%2020241221215927.png)

#### 1.7.1.1 Explanation:

1. **Join (`⨝`)**:
    - Perform a natural join between `Artikel` and `Lagerbestand` on the condition `Artikel.Nr = Lagerbestand.ArtNr`.
2. **Grouping and Aggregation (`γ`)**:
    - Group by `Nr` and compute `sum(Anzahl)` for each article.
3. **Rename (`ρ`)**:
    - Rename the aggregated column (`sum(Anzahl)`) as `Stückzahl` for clarity.
4. **Projection (`π`)**:
    - Select only the columns `Bezeichnung` and `Stückzahl` for the final output.

**Grouping (γ) and Aggregation**:
- Group the result of the join by the attribute `Nr` (likely the item number or ID).
- Compute two aggregation functions:
    - **`sum`**: The sum of a specific column (likely the quantity or value of items, though it is not explicitly stated in the query).
    - **`Anzahl`**: The count of items in each group.

The query produces a result relation where:
- Each group corresponds to a distinct value of `Nr` (item number).
- For each group, it includes:
    - The item number `Nr`.
    - The sum of a specified attribute (e.g., total quantity or price).
    - The count of items in that group (`Anzahl`).

**Grouping and Aggregation** (`γ`):  
Group by `Nr`, compute:
- `sum(Menge)` (total quantity).
- `Anzahl` (count of items).

# 2 **Join (`⨝`)**:

1. **Join (`⨝`)**:
    - Perform a natural join between `Artikel` and `Lagerbestand` on the condition `Artikel.Nr = Lagerbestand.ArtNr`.
# 3 例子

Gegeben sei die in nachfolgender Tabelle dargestellte Relation „Verweise“, die Querverweise zwischen Websites dokumentiert. Ermitteln Sie das korrekte SQL-Statement für folgende relationale Anfrage (auf Groß- und Kleinschreibung muss nicht geachtet werden):
```sql
ρ[(seite1, seite2, seite3, seite4, seite5)] (
    π[A.SiteNo,B.SiteNo,C.SiteNo,D.SiteNo,D.LinksTo]
    (
        σ [A.LinksTo = B.SiteNo Λ B.LinksTo = C.SiteNo Λ C.LinksTo = D.SiteNo]
        (
            ρ[A](Verweise) x ρ[B](Verweise) x ρ[C](Verweise) x ρ[D](Verweise)
        )
    )
)
```

等效于 
```sql
select a.siteno as seite1, b.siteno as seite2, c.siteno as seite3, d.siteno as seite4, d.linksto as seite5
from verweise a, verweise b, verweise c, verweise d
where a.linksto = b.siteno
and b.linksto = c.siteno
and c.linksto = d.siteno;

```

Erklärung des relationalen Ausdrucks:

1. `**ρ[A], ρ[B], ρ[C], ρ[D]` (Rename Operator):**
    - Die Tabelle `Verweise` wird **viermal** verwendet und jeweils mit einem **Alias** (`A`, `B`, `C`, `D`) versehen, um sie mehrfach im kartesischen Produkt zu nutzen.
2. **x (Kartesisches Produkt):**
    - Die vier umbenannten Tabellen werden in einem **kartesischen Produkt** miteinander verknüpft.
3. **σ (Selektion):**
    - Bedingungen zwischen den Spalten der vier Tabellen:
        - `A.LinksTo = B.SiteNo` → Seite1 zeigt auf Seite2
        - `B.LinksTo = C.SiteNo` → Seite2 zeigt auf Seite3
        - `C.LinksTo = D.SiteNo` → Seite3 zeigt auf Seite4
4. **π (Projektion):**
    - Die Ergebnismenge wird auf folgende Spalten eingeschränkt:
        - `A.SiteNo` (Seite1)
        - `B.SiteNo` (Seite2)
        - `C.SiteNo` (Seite3)
        - `D.SiteNo` (Seite4)
        - `D.LinksTo` (Seite5).
5. **`ρ[(seite1, seite2, seite3, seite4, seite5)]` (Finale Umbenennung):**
    - Die Projektion wird abschließend auf die Namen `seite1`, `seite2`, `seite3`, `seite4`, `seite5` umbenannt.



## 3.1 例子2 

![](image/Pasted%20image%2020250718133058.png)



对的 : 2 ,3  

2: 
x : kartische produckt 
显示 select, 然后 rename (S 就是 tabelle Substantive ) , 然后 where,   然后 grouping 

3 
从最后的效果来看 是正确的

4 是错的
 先 从 plaural 中 grouping 中 count 出 xx 
 然后 join substantive
得到的 只是 kleine Teil 


