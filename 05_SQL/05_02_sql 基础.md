



where lower(firma) like '%ag%';


GROUP BY - Gruppierung, ORDER BY - Sortierung

select m.mitgliedsnummer, substr(m.eintrittsjahr,7,2) as eintritt, (substr(m.austrittsjahr,7,2)) as austritt 


# 1 Select 语句执行顺序 


```
select 字段
from 表名
where …….
group by ……..
having …….(就是为了过滤分组后的数据而存在的—不可以单独的出现)
order by ……..

```

以上语句的执行顺序
1.         首先执行where语句过滤原始数据
2.         执行group by进行分组
3.         执行having对分组数据进行操作
4.         执行select选出数据
5.         执行order by排序

原则：能在where中过滤的数据，尽量在where中过滤，效率较高。having的过滤是专门对分组之后的数据进行过滤的。



# 2 where 

## 2.1 聚合函数 

Count(),  sum() , avg() , max() , min() , distinct()

特别重要 在 where 后都不能用 这个5个分组函数 count, sum, avg, max, min， 因为分组函数是在 where之后执行的

分组函数 必须在分完组之后 执行 ， 就是说 group 在 group by 之后执行  ( group by 在  where 之后 )
所以 **SELECT** ename, sal **AS** Salary **from** emp **WHERE** SAL > **AVG**(SAL) ; 这样会报错

这个5个分组函数 count, sum, avg, max, min  都会自动忽略null



# 3 having 

```
select job, avg(sal) from emp group by job having avg(sal) >2000;
```


```
SELECT MIN(salary),department_id
FROM employees
GROUP BY department_id
HAVING MIN(salary)>(
	SELECT  MIN(salary)
	FROM employees
	WHERE department_id = 50
);

```