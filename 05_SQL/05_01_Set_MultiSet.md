


# 1 🔹 1. **Set（集合）**

- **特点**：集合中的元素**唯一**，没有重复行。
    
- SQL 中如果去掉重复行（`SELECT DISTINCT`），就是 set 语义。
    
- 在集合语义下：
    
    - 两个查询如果返回相同的行集合（不考虑顺序），它们就是等价的。
        

---

# 2 🔹 2. **Multiset（多重集合 / bag）**

- **特点**：可以包含重复行。
    
- SQL 默认的查询就是 **multiset**：
    
    - `SELECT` 会保留重复行，除非使用 `DISTINCT`。
        
- 在多重集合语义下：
    
    - 两个查询必须返回 **完全相同的行及其重复次数** 才算等价。
        

---

# 3 🔹 3. 查询等价性

- **等价性（equivalence）** 要看语义：
    
    1. **Set 等价性**：只看最终集合内容是否相同，重复行无关紧要。
        
    2. **Multiset 等价性**：不仅集合内容要相同，重复行的数量也必须一致。


假设题目中有两条 SQL 查询，你需要判断它们在：

- **Set 语义下**是否等价
    
- **Multiset 语义下**是否等价
    

结论可能是：

|情况|判断依据|
|---|---|
|两查询结果行完全相同且重复次数相同|✅ Multiset 和 Set 都等价|
|两查询结果行相同但重复次数不同|❌ Multiset 不等价，但 ✅ Set 等价|
|两查询结果行不同|❌ 两种语义都不等价|



